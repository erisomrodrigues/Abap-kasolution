REPORT Z_SCREEN_00_B.

TABLES: SSCRFIELDS.

DATA: V_ONOFF  TYPE C LENGTH 3.
DATA: V_CARRID TYPE SCARR-CARRID.

SELECTION-SCREEN BEGIN OF BLOCK B1 WITH FRAME TITLE TEXT-001.
PARAMETERS: P_DATA TYPE D.
SELECT-OPTIONS S_CARRID FOR V_CARRID.
SELECTION-SCREEN END OF BLOCK B1.

SELECTION-SCREEN SKIP.
SELECTION-SCREEN PUSHBUTTON /15(12) BUTTON USER-COMMAND OFOFF.


INITIALIZATION.
BUTTON = 'DATA ON/OFF'.

P_DATA = SY-DATUM - 5.
S_CARRID-SIGN = 'E'.
S_CARRID-OPTION = 'EQ'.
S_CARRID-LOW = 'AZ'.
APPEND S_CARRID.

S_CARRID-SIGN = 'I'.
S_CARRID-OPTION = 'BT'.
S_CARRID-LOW = 'AA'.
S_CARRID-HIGH = 'QF'.
APPEND S_CARRID.

AT SELECTION-SCREEN ON P_DATA.
  IF P_DATA GT SY-DATUM.
    MESSAGE E208(00) WITH 'DATA INVALIDA'.
  ENDIF.

AT SELECTION-SCREEN.
  IF SSCRFIELDS-UCOMM EQ 'ONOFF'.
    IF V_ONOFF = 'OFF'.
       V_ONOFF = 'ON'.
    ELSE.
      V_ONOFF = 'OFF'.
    ENDIF.
    ENDIF.

  AT SELECTION-SCREEN OUTPUT.
    LOOP AT SCREEN.
      IF SCREEN-NAME = 'P_DATA'.
        IF V_ONOFF = 'OFF'.
          SCREEN-INPUT = 0.
        ENDIF.

        MODIFY SCREEN.
        ENDIF.
    ENDLOOP.
